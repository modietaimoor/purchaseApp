<div>
  <div *ngIf="showNewProductModal" class="absolute overflow-hidden fixed inset-0 z-50 justify-center items-center flex" data-keyboard="false" data-backdrop="static">
    <div class="relative m-16 mx-auto max-w-4xl" style="width: 56rem">
      <div class="border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none">
        <div class="flex items-start justify-between p-5 border-b border-solid border-blueGray-200 rounded-t">
          <h3 class="text-3xl font-semibold">
            Add New Product
          </h3>
          <button class="p-1 ml-auto bg-transparent border-0 text-black opacity-5 float-right text-3xl leading-none font-semibold outline-none focus:outline-none" (click)="showHideNewProductModal(false)">
            <span class="bg-transparent text-black h-6 w-6 text-2xl block outline-none focus:outline-none">x</span>
          </button>
        </div>
        <!--body-->
        <div class="relative p-4 flex-auto">
          <div class="flex-auto px-4 lg:px-10 py-10 pt-0">
            <form [formGroup]="productFormGroup" (ngSubmit)="saveProduct()">
              <div class="flex flex-wrap">
                <div class="w-full">
                  <ul class="flex mb-0 list-none flex-wrap pt-3 pb-4 flex-row">
                    <li class="-mb-px mr-2 last:mr-0 flex-auto text-center">
                      <a class="text-xs font-bold uppercase px-5 py-3 shadow-lg rounded block leading-normal" (click)="toggleTabs(1)" [ngClass]="{'text-red-600 bg-white': openTab !== 1, 'text-white bg-red-600': openTab === 1}">
                        Basic Information
                      </a>
                    </li>
                    <li class="-mb-px mr-2 last:mr-0 flex-auto text-center">
                      <a class="text-xs font-bold uppercase px-5 py-3 shadow-lg rounded block leading-normal" (click)="toggleTabs(2)" [ngClass]="{'text-red-600 bg-white': openTab !== 2, 'text-white bg-red-600': openTab === 2}">
                        Other
                      </a>
                    </li>
                  </ul>
                  <div class="relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-lg rounded">
                    <div class="p-3 flex-auto">
                      <div class="tab-content tab-space">
                        <div [ngClass]="{'hidden': openTab !== 1, 'block': openTab === 1}">
                          <h6 class="text-blueGray-400 text-base mb-6 font-bold uppercase">
                            User Information
                          </h6>
                          <div class="flex flex-wrap">
                            <div class="w-full lg:w-4/12 px-4">
                              <div class="relative w-full mb-3">
                                <label class="block uppercase text-blueGray-600 text-sm font-bold mb-2">
                                  Product Code
                                </label>
                                <input type="text" formControlName="productCode" class="border-0 p-3 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full" />
                              </div>
                            </div>
                            <div class="w-full lg:w-8/12 px-4">
                              <div class="relative w-full mb-3">
                                <label class="block uppercase text-blueGray-600 text-sm font-bold mb-2">
                                  Product Name
                                </label>
                                <input type="text" formControlName="productName" class="border-0 p-3 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full" />
                              </div>
                            </div>
                            <div class="w-full px-4">
                              <div class="relative w-full mb-3">
                                <label class="block uppercase text-blueGray-600 text-sm font-bold mb-2">
                                  Product Description
                                </label>
                                <input type="text" formControlName="productDescription" class="border-0 p-3 text-blueGray-600 bg-white shadow rounded rounded text-sm resize-none w-full" />
                              </div>
                            </div>
                          </div>
                          <hr class="mt-6 border-b-1 border-blueGray-300" />
                          <h6 class="text-blueGray-400 text-base mt-3 mb-6 font-bold uppercase">
                            Product Sizes
                          </h6>
                          <div class="flex flex-wrap">
                            <div class="w-full px-4">
                              <div class="relative w-full mb-3">
                                <label class="block uppercase text-blueGray-600 text-sm font-bold mb-2">
                                  Select Size(s)
                                </label>
                                <div class="flex flex-wrap" *ngIf="sizes.length > 0">
                                  <div class="flex flex-wrap w-1/5 mx-4 my-4" *ngFor="let sz of sizes">
                                    <input type="checkbox" [(ngModel)]="sz.Selected" [ngModelOptions]="{standalone: true}" class="px-3 py-3 text-red-600 bg-white rounded text-sm shadow outline-none focus:outline-none focus:shadow-outline" />
                                    <span class="block uppercase text-red-600 text-base font-semibold mb-2 ml-2">{{sz.SizeDescription}}</span>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div [ngClass]="{'hidden': openTab !== 2, 'block': openTab === 2}">
                          <h6 class="text-blueGray-400 text-base mb-6 font-bold uppercase">
                            Photo
                          </h6>
                          <div class="flex flex-wrap">
                            <div class="w-full px-4">
                              <div class="relative w-full mb-3">
                                <label class="block uppercase text-blueGray-600 text-sm font-bold mb-2 w-full">
                                  Select Product Photo
                                </label>
                                <div class="w-full flex">
                                  <div class="w-1/2">
                                    <input type="file" (change)="uploadPhoto($event)" class="border-0 p-3 text-blueGray-600 bg-white rounded text-sm shadow w-full" accept="image/*" #imgComp />
                                  </div>
                                  <div class="relative mb-3 ml-4 shadow-md rounded-lg" *ngIf="ImageSelected" style="width:200px">
                                    <img src="../../assets/imgs/closeicon.png" alt="Remove Photo" class="cursor-pointer" (click)="imgComp.value = ''; removePhoto()" style="height: 20px; width:20px; left:180px" />
                                    <img formControlName="productPhoto" style="height: 200px; width:200px;" />
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <hr class="border-b-1 border-blueGray-300" />
                          <h6 class="text-blueGray-400 text-base mt-3 mb-6 font-bold uppercase">
                            Categories
                          </h6>
                          <div class="flex flex-wrap">
                            <div class="w-full px-4">
                              <div class="relative w-full mb-3">
                                <label class="block uppercase text-blueGray-600 text-sm font-bold mb-2">
                                  Select one or more category
                                </label>
                                <div class="flex flex-wrap" *ngIf="sizes.length > 0">
                                  <div class="flex flex-wrap w-1/5 mx-4 my-4" *ngFor="let cat of categories">
                                    <input type="checkbox" [(ngModel)]="cat.Selected" [ngModelOptions]="{standalone: true}" class="px-3 py-3 text-red-600 bg-white rounded text-sm shadow outline-none focus:outline-none focus:shadow-outline" />
                                    <span class="block uppercase text-red-600 text-base font-semibold mb-2 ml-2">{{cat.CategoryName}}</span>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <hr class="border-b-1 border-blueGray-300" />
                          <h6 class="text-blueGray-400 text-base mt-3 mb-6 font-bold uppercase">
                            Product Price
                          </h6>
                          <div class="flex flex-wrap">
                            <div class="w-full px-4">
                              <div class="relative w-full mb-3">
                                <label class="block uppercase text-blueGray-600 text-sm font-bold mb-2">
                                  Price
                                </label>
                                <input type="number" min="0.01" step="0.01" formControlName="productPrice" class="border-0 p-3 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-1/5" />
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="flex items-center justify-end p-6 border-t border-solid border-blueGray-200 rounded-b">
                  <button class="text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm m-1" type="button" (click)="showHideNewProductModal(false)">
                    Cancel
                  </button>
                  <button class="bg-emerald-500 text-white font-bold uppercase text-sm p-3 rounded shadow m-1" type="submit" [disabled]="!productFormGroup.valid">
                    Save Product
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="showNewProductModal" class="opacity-50 fixed inset-0 z-40 bg-black overflow-hidden"></div>

  <div *ngIf="showAlert" class="text-white px-6 py-4 border-0 rounded relative mb-4 bg-red-500">
    <span class="text-xl inline-block mr-5 align-middle">
      <i class="fas fa-bell"></i>
    </span>
    <span class="inline-block align-middle mr-8">
      <b class="capitalize">{{alertMessage}}</b>
    </span>
    <button class="absolute bg-transparent text-2xl font-semibold leading-none right-0 top-0 mt-4 mr-6 outline-none focus:outline-none" (click)="showAlert = false">
      <span>×</span>
    </button>
  </div>

  <div class="overflow-x-hidden overflow-y-auto h-screen p-4">
    <h1 class="text-4xl font-normal leading-normal m-1 uppercase font-bold w-full">Manage Products</h1>
    <div class="w-full px-4 h-16 mb-12">
      <button class="text-white bg-red-600 font-bold uppercase text-base p-3 rounded m-1 float-right" (click)="deleteSelectedProducts()" *ngIf="productsList !== null && productsList.length > 0" [disabled]="!OneProductSelected()">
        Delete Selected Product(s)
      </button>
      <button class="text-white bg-emerald-700 font-bold uppercase text-base p-3 rounded m-1 float-right" (click)="showHideNewProductModal(true)">
        Add New Product
      </button>
    </div>
    <div class="w-full p-4 shadow-lg rounded bg-white row" *ngIf="productsList !== null && productsList.length > 0">
        <div class="flex flex-wrap">
          <div class="bg-white w-1/2 p-4 shadow-lg rounded cursor-pointer z-10" *ngFor="let prod of productsList" (click)="prod.Selected = !prod.Selected;" [ngStyle]="{'border' : prod.Selected === true ? '2px red solid': 'none'}">
            <div class="p-3 m-1 bg-amber-100">
              <h3 (click)="prod.Selected = !prod.Selected;" class="text-3xl font-semibold w-full leading-normal mb-2 text-blueGray-700 text-left float-left">{{prod.ProductName}}</h3>        
              <div class="w-2/3 px-1 inline-block" (click)="prod.Selected = !prod.Selected;">
                <div class="w-full">
                  <span class="text-lg font-semibold py-1 px-2 uppercase rounded text-blueGray-600 bg-blueGray-200 uppercase float-left" (click)="prod.Selected = !prod.Selected;">
                    Code: {{prod.ProductCode}}
                  </span>
                </div>            
                <p class="text-lg font-light leading-relaxed mt-4 mb-4 text-blueGray-600 w-full float-left" (click)="prod.Selected = !prod.Selected;">{{prod.ProductDescription}}</p>
                <div class="text-lg font-semibold inline-block py-1 px-2 uppercase rounded text-emerald-600 bg-emerald-200 uppercase float-left m-2" (click)="prod.Selected = !prod.Selected;">
                  {{prod.ProductPrice | currency: 'EGP'}}
                </div>
              </div>
              <div class="w-1/3 px-1 inline-block">
                <span style="background-image: url('data:image/jpg;base64,{{prod.PhotoBody}}')" class="block bg-full shadow-xl rounded-full p-1 align-middle prod-image cursor-pointer pull-right" (click)="prod.Selected = !prod.Selected;" [ngStyle]="{'border' : prod.Selected === true ? '2px red solid': 'none'}" ></span>
              </div>
            </div>
          </div>
        </div>
    </div>
    <div class="w-full px-4 text-center" *ngIf="productsList === null && productsList.length <= 0">
      <span class="text-xl font-bold inline-block p-2 uppercase rounded-full text-red-600 bg-red-200 uppercase last:mr-1">
        You currently have no products on the portal.
      </span>
    </div>
  </div>

</div>
